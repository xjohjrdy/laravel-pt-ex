webpackJsonp([2],{"1SJR":function(t,e,i){"use strict";e.a=function(t,e){var i,n;void 0===e&&(e={});var s=e.indexKey||"index";return a.a.extend({inject:(i={},i[t]={default:null},i),computed:(n={parent:function(){return this.disableBindRelation?null:this[t]}},n[s]=function(){return this.bindRelation(),this.parent.children.indexOf(this)},n),mounted:function(){this.bindRelation()},beforeDestroy:function(){var t=this;this.parent&&(this.parent.children=this.parent.children.filter(function(e){return e!==t}))},methods:{bindRelation:function(){if(this.parent&&-1===this.parent.children.indexOf(this)){var t=[].concat(this.parent.children,[this]),e=function(t){var e=[];return function t(i){i.forEach(function(i){e.push(i),i.children&&t(i.children)})}(t),e}(this.parent.slots());t.sort(function(t,i){return e.indexOf(t.$vnode)-e.indexOf(i.$vnode)}),this.parent.children=t}}}})},e.b=function(t){return{provide:function(){var e;return(e={})[t]=this,e},data:function(){return{children:[]}}}};var a=i("7+uW")},"3FdM":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,n,s,r,o,c=i("Xxa5"),l=i.n(c),u=(i("eqfM"),i("/QYm")),d=i("exGp"),_=i.n(d),h=i("bOdI"),p=i.n(h),v=(i("nsZj"),i("T2s0"),i("1H7Z"),i("4rJS"),i("o69Z")),f=i("+2ln"),m={inject:{vanField:{default:null}},watch:{value:function(){var t=this.vanField;t&&(t.resetValidation(),t.validateWithTrigger("onChange"))}},created:function(){var t=this.vanField;t&&!t.children&&(t.children=this)}},b=i("1SJR"),y=Object(v.b)("radio"),g=y[0],D=y[1],C=g({mixins:[(a={bem:D,role:"radio",parent:"vanRadio"},n=a.parent,s=a.bem,r=a.role,{mixins:[Object(b.a)(n),m],props:{name:null,value:null,disabled:Boolean,iconSize:[Number,String],checkedColor:String,labelPosition:String,labelDisabled:Boolean,shape:{type:String,default:"round"},bindGroup:{type:Boolean,default:!0}},computed:{disableBindRelation:function(){return!this.bindGroup},isDisabled:function(){return this.parent&&this.parent.disabled||this.disabled},direction:function(){return this.parent&&this.parent.direction||null},iconStyle:function(){var t=this.checkedColor||this.parent&&this.parent.checkedColor;if(t&&this.checked&&!this.isDisabled)return{borderColor:t,backgroundColor:t}},tabindex:function(){return this.isDisabled||"radio"===r&&!this.checked?-1:0}},methods:{onClick:function(t){var e=t.target,i=this.$refs.icon,a=i===e||i.contains(e);this.isDisabled||!a&&this.labelDisabled||this.toggle(),this.$emit("click",t)},genIcon:function(){var t=this.$createElement,e=this.checked,i=this.iconSize||this.parent&&this.parent.iconSize;return t("div",{ref:"icon",class:s("icon",[this.shape,{disabled:this.isDisabled,checked:e}]),style:{fontSize:Object(v.a)(i)}},[this.slots("icon",{checked:e})||t(f.a,{attrs:{name:"success"},style:this.iconStyle})])},genLabel:function(){var t=this.$createElement,e=this.slots();if(e)return t("span",{class:s("label",[this.labelPosition,{disabled:this.isDisabled}])},[e])}},render:function(){var t=arguments[0],e=[this.genIcon()];return"left"===this.labelPosition?e.unshift(this.genLabel()):e.push(this.genLabel()),t("div",{attrs:{role:r,tabindex:this.tabindex,"aria-checked":String(this.checked)},class:s([{disabled:this.isDisabled,"label-disabled":this.labelDisabled},this.direction]),on:{click:this.onClick}},[e])}})],computed:{currentValue:{get:function(){return this.parent?this.parent.value:this.value},set:function(t){(this.parent||this).$emit("input",t)}},checked:function(){return this.currentValue===this.name}},methods:{toggle:function(){this.currentValue=this.name}}}),w=(i("ZfdV"),Object(v.b)("radio-group")),k=w[0],x=w[1],S=k({mixins:[Object(b.b)("vanRadio"),m],props:{value:null,disabled:Boolean,direction:String,checkedColor:String,iconSize:[Number,String]},watch:{value:function(t){this.$emit("change",t)}},render:function(){return(0,arguments[0])("div",{class:x([this.direction]),attrs:{role:"radiogroup"}},[this.slots()])}}),j=(i("LlGJ"),i("Wtz3")),I=(i("mMXg"),i("qYlo")),$=i("mF0L"),O={name:"",data:function(){return{app_id:"",product_id:"",buyNum:"",accountInput:"",threeDetail:"",sheetShow:!1,pay_type:"10",isMore:!1,countDownList:"",actEndTime:""}},components:(o={},p()(o,I.a.name,I.a),p()(o,j.a.name,j.a),p()(o,S.name,S),p()(o,C.name,C),o),mounted:function(){if(this.$route.query.threeDetail){if(this.threeDetail=JSON.parse(this.$route.query.threeDetail),1==this.threeDetail.status){var t=$.b.formatRepTime(this.threeDetail.updated_at)+1800;this.actEndTime=$.b.formatMsgTime(t),this.countDown()}}else this.app_id=this.$route.query.app_id,this.product_id=this.$route.query.product_id,this.buyNum=this.$route.query.buyNum,this.accountInput=this.$route.query.accountInput,this.getFuluPayInfo()},computed:{},methods:{timeFormat:function(t){return t<10?"0"+t:t},countDown:function(){var t=this,e=setInterval(function(){var i=(new Date).getTime(),a=new Date(t.actEndTime).getTime(),n=null;if(a-i>0){var s=(a-i)/1e3,r=parseInt(s%86400%3600/60),o=parseInt(s%86400%3600%60);n={min:t.timeFormat(r),sec:t.timeFormat(o)}}else n={min:"00",sec:"00"},clearInterval(e);t.countDownList=n.min+"分"+n.sec+"秒"},1e3)},getFuluPayInfo:function(){var t=this;return _()(l.a.mark(function e(){var i,a,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(i=t).bus.$emit("loading",!0),a='{"app_id":"'+i.app_id+'", "product_id":"'+i.product_id+'", "num":"'+i.buyNum+'", "account":"'+i.accountInput+'"}',e.next=5,i.ajaxPost("fulu_pre_pay_info",a,{});case 5:200==(n=e.sent).data.code?(i.threeDetail=n.data.data,i.app_id=n.data.data.app_id):Object(u.a)(n.data.msg),i.bus.$emit("loading",!1);case 8:case"end":return e.stop()}},e,t)}))()},fufuBay:function(){this.sheetShow=!0},closePopup:function(){this.sheetShow=!1},onSelect:function(){var t=this;return _()(l.a.mark(function e(){var i,a,n,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=t).isMore){e.next=5;break}return Object(u.a)("操作频繁！"),setTimeout(function(){i.$router.go(-1)},1500),e.abrupt("return");case 5:if(i.bus.$emit("loading",!0),i.isMore=!0,i.sheetShow=!1,!i.product_id){e.next=15;break}return a='{"app_id":"'+i.app_id+'", "product_id":"'+i.product_id+'", "num":"'+i.buyNum+'", "account":"'+i.accountInput+'", "pay_type":"'+i.pay_type+'"}',e.next=12,i.ajaxPost("fulu_order_pay_info",a,{});case 12:n=e.sent,e.next=19;break;case 15:return a='{"app_id":"'+i.threeDetail.app_id+'", "order_id":"'+i.threeDetail.order_id+'", "pay_type":"'+i.pay_type+'"}',e.next=18,i.ajaxPost("fulu_order_to_pay",a,{});case 18:n=e.sent;case 19:200==n.data.code?(s=n.data.data,$.a.isAndroid()?(10==i.pay_type?window.jsbridge.jumpAliPay(s.fcode_url):window.jsbridge.jumpWeChatPay(s),i.$router.go(-1)):$.a.isIos()&&(10==i.pay_type?window.location.href="jsbridge://jumpAliPay?data="+s.fcode_url:window.location.href="jsbridge://jumpWeChatPay?data="+s,setTimeout(function(){i.$router.go(-1)},3e3))):(Object(u.a)(n.data.msg),setTimeout(function(){i.$router.go(-1)},2e3)),i.bus.$emit("loading",!1);case 21:case"end":return e.stop()}},e,t)}))()}}},P={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrap"},[i("article",{staticClass:"main order_detail_box"},[t.product_id?i("div",{staticClass:"info_top"},[i("h3",[t._v("待支付 •••")]),t._v(" "),i("p",[t._v("订单超过30分钟自动取消，请尽快完成支付")])]):t._e(),t._v(" "),0==t.threeDetail.status?i("div",{staticClass:"info_top"},[i("h3",[t._v("已失效")]),t._v(" "),i("p",[t._v("订单超过30分钟将自动取消，请重新购买。")])]):t._e(),t._v(" "),1==t.threeDetail.status?i("div",{staticClass:"info_top"},[i("h3",[t._v("待支付 •••")]),t._v(" "),i("p",[t._v("订单超过30分钟自动取消，请在 "+t._s(t.countDownList)+" 内完成支付")])]):t._e(),t._v(" "),2==t.threeDetail.status?i("div",{staticClass:"info_top"},[i("h3",[t._v("订单处理中 •••")]),t._v(" "),i("p",[t._v("订单处理中，请耐心等待 ，如有疑问请联系相关客服。")])]):t._e(),t._v(" "),3==t.threeDetail.status?i("div",{staticClass:"info_top"},[i("h3",[t._v("订单已完成")]),t._v(" "),i("p",[t._v("您的订单已完成，如有疑问请联系相关客服。")])]):t._e(),t._v(" "),4==t.threeDetail.status?i("div",{staticClass:"info_top"},[i("h3",[t._v("退款成功")]),t._v(" "),i("p",[t._v("您的订单已退款成功，期待您的下次购买")])]):t._e(),t._v(" "),5==t.threeDetail.status?i("div",{staticClass:"info_top"},[i("h3",[t._v("退款失败")]),t._v(" "),i("p",[t._v("您的订单退款失败，如有疑问请联系相关客服。")])]):t._e(),t._v(" "),i("div",{staticClass:"info_content"},[i("div",{staticClass:"cont_top"},[i("van-image",{staticClass:"image",attrs:{src:t.threeDetail.img},scopedSlots:t._u([{key:"error",fn:function(){return[i("img",{attrs:{src:"https://a119112.oss-cn-beijing.aliyuncs.com/bxl_item/webCoupon/iconEmpty.png"}})]},proxy:!0}])}),t._v(" "),i("div",{staticClass:"cont"},[i("h3",{staticClass:"overflowTextOne"},[t._v(t._s(t.threeDetail.product_name))]),t._v(" "),i("p",[t._v("￥"+t._s(t._f("addZero")(t.threeDetail.real_price)))]),t._v(" "),i("h4",[t._v("X"+t._s(t.threeDetail.buy_num))])])],1),t._v(" "),t.threeDetail.order_id?i("ul",{staticClass:"cont_line"},[i("li",[i("span",{staticStyle:{width:"6.4rem"}},[t._v(t._s(t.threeDetail.product_name))]),t._v(" "),i("em",[t._v("￥"+t._s(t._f("addZero")(t.threeDetail.real_price)))])]),t._v(" "),t.threeDetail.charge_account?i("li",[i("span",[t._v("充值账号")]),t._v(" "),i("em",[t._v(t._s(t.threeDetail.charge_account))])]):t._e(),t._v(" "),i("li",[i("span",[t._v("充值类型")]),t._v(" "),i("em",[t._v(t._s(t.threeDetail.product_type))])]),t._v(" "),i("li",[i("span",[t._v("订单编号")]),t._v(" "),i("em",[t._v(t._s(t.threeDetail.order_id))])]),t._v(" "),i("li",[i("span",[t._v("下单时间")]),t._v(" "),i("em",[t._v(t._s(t.threeDetail.created_at))])]),t._v(" "),t.threeDetail.status>1?i("li",[i("span",[t._v("支付方式")]),t._v(" "),i("em",[t._v(t._s(10==t.threeDetail.pay_type?"支付宝":"微信"))])]):i("li",[i("span",[t._v("支付方式")]),t._v(" "),i("em",[t._v("未支付")])]),t._v(" "),i("li",[i("span",[t._v("充值数量")]),t._v(" "),i("em",[t._v("X"+t._s(t.threeDetail.buy_num))])]),t._v(" "),i("li",[i("span",[t._v("订单总价")]),t._v(" "),i("em",[t._v("￥"+t._s(t._f("addZero")(t.threeDetail.real_price)))])])]):i("ul",{staticClass:"cont_line"},[i("li",[i("span",{staticStyle:{width:"6.4rem"}},[t._v(t._s(t.threeDetail.product_name))]),t._v(" "),i("em",[t._v("￥"+t._s(t._f("addZero")(t.threeDetail.purchase_price)))])]),t._v(" "),t.threeDetail.account?i("li",[i("span",[t._v("充值账号")]),t._v(" "),i("em",[t._v(t._s(t.threeDetail.account))])]):t._e(),t._v(" "),i("li",[i("span",[t._v("充值类型")]),t._v(" "),i("em",[t._v(t._s(t.threeDetail.product_type))])]),t._v(" "),t._m(0),t._v(" "),i("li",[i("span",[t._v("充值数量")]),t._v(" "),i("em",[t._v("X"+t._s(t.threeDetail.buy_num))])]),t._v(" "),i("li",[i("span",[t._v("订单总价")]),t._v(" "),i("em",[t._v("￥"+t._s(t._f("addZero")(t.threeDetail.real_price)))])])])]),t._v(" "),t.threeDetail.status>=0?i("div",[1==t.threeDetail.status?i("div",{staticClass:"bottom"},[i("a",{staticClass:"btn_b",attrs:{href:"javascript:;"},on:{click:t.fufuBay}},[t._v("立即支付")]),t._v(" "),t.threeDetail.two_type>0?i("router-link",{staticClass:"btn_a",attrs:{to:{path:"GoodsDetail",query:{app_id:t.threeDetail.app_id,type:t.threeDetail.two_type}}}},[t._v("再来一单")]):t._e()],1):i("div",{staticClass:"bottom"},["卡密"==t.threeDetail.product_type&&3==t.threeDetail.status?i("div",[i("router-link",{attrs:{to:{path:"Extract",query:{app_id:t.threeDetail.app_id,order_id:t.threeDetail.order_id}}}},[t._v("提取卡密")]),t._v(" "),t.threeDetail.two_type>0?i("router-link",{attrs:{to:{path:"GoodsDetail",query:{app_id:t.threeDetail.app_id,type:t.threeDetail.two_type}}}},[t._v("再来一单")]):t._e()],1):i("div",[t.threeDetail.two_type>0?i("router-link",{attrs:{to:{path:"GoodsDetail",query:{app_id:t.threeDetail.app_id,type:t.threeDetail.two_type}}}},[t._v("再来一单")]):t._e(),t._v(" "),i("router-link",{attrs:{to:{name:"Index"}}},[t._v("返回首页")])],1)])]):t._e()]),t._v(" "),i("van-popup",{attrs:{position:"bottom",round:""},model:{value:t.sheetShow,callback:function(e){t.sheetShow=e},expression:"sheetShow"}},[i("div",{staticClass:"popup_cont"},[i("div",{staticClass:"title"},[t._v("选择支付方式")]),t._v(" "),i("div",{staticClass:"content"},[i("van-radio-group",{attrs:{"icon-size":"0.42rem"},model:{value:t.pay_type,callback:function(e){t.pay_type=e},expression:"pay_type"}},[i("van-radio",{attrs:{name:"10"}},[i("img",{staticClass:"icon",attrs:{src:"https://a119112.oss-cn-beijing.aliyuncs.com/bxl_item/webCoupon/iconAlipay.png"}}),t._v("支付宝支付\n          ")]),t._v(" "),i("van-radio",{attrs:{name:"11"}},[i("img",{staticClass:"icon",attrs:{src:"https://a119112.oss-cn-beijing.aliyuncs.com/bxl_item/webCoupon/iconWeChat.png"}}),t._v("微信支付\n          ")])],1)],1),t._v(" "),i("div",{staticClass:"button",on:{click:t.onSelect}},[t._v("去支付(￥"+t._s(t._f("addZero")(t.threeDetail.real_price))+")")]),t._v(" "),i("div",{staticClass:"closebtn",on:{click:t.closePopup}})])]),t._v(" "),t.product_id?i("footer",[i("div",{staticClass:"foot_btn",on:{click:t.fufuBay}},[t._v("立即购买")])]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("span",[this._v("支付方式")]),this._v(" "),e("em",[this._v("未支付")])])}]};var T=i("VU/8")(O,P,!1,function(t){i("NblP")},"data-v-5c2ea28b",null);e.default=T.exports},"4rJS":function(t,e){},NblP:function(t,e){},ZfdV:function(t,e){},mF0L:function(t,e,i){"use strict";i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n});var a={isWeixin:function(){return!!/MicroMessenger/i.test(navigator.userAgent)},isAndroid:function(){return!!/android/i.test(navigator.userAgent)},isIos:function(){return!!/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)}},n={formatRepTime:function(t){var e=t.replace(/-/g,"/");return Date.parse(e)/1e3},formatMsgTime:function(t){var e=new Date(1e3*parseInt(t));return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}}},mMXg:function(t,e,i){"use strict";var a=i("nsZj"),n=(i.n(a),i("02pT")),s=(i.n(n),i("T2s0")),r=(i.n(s),i("1H7Z")),o=(i.n(r),i("hW8u"));i.n(o)},qYlo:function(t,e,i){"use strict";var a=i("o69Z"),n=i("CsZI"),s=i("+2ln"),r=Object(a.b)("popup"),o=r[0],c=r[1];e.a=o({mixins:[Object(n.a)()],props:{round:Boolean,duration:[Number,String],closeable:Boolean,transition:String,safeAreaInsetBottom:Boolean,closeIcon:{type:String,default:"cross"},closeIconPosition:{type:String,default:"top-right"},position:{type:String,default:"center"},overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0}},beforeCreate:function(){var t=this,e=function(e){return function(i){return t.$emit(e,i)}};this.onClick=e("click"),this.onOpened=e("opened"),this.onClosed=e("closed")},render:function(){var t,e=arguments[0];if(this.shouldRender){var i=this.round,n=this.position,r=this.duration,o="center"===n,l=this.transition||(o?"van-fade":"van-popup-slide-"+n),u={};if(Object(a.d)(r))u[o?"animationDuration":"transitionDuration"]=r+"s";return e("transition",{attrs:{name:l},on:{afterEnter:this.onOpened,afterLeave:this.onClosed}},[e("div",{directives:[{name:"show",value:this.value}],style:u,class:c((t={round:i},t[n]=n,t["safe-area-inset-bottom"]=this.safeAreaInsetBottom,t)),on:{click:this.onClick}},[this.slots(),this.closeable&&e(s.a,{attrs:{role:"button",tabindex:"0",name:this.closeIcon},class:c("close-icon",this.closeIconPosition),on:{click:this.close}})])])}}})}});