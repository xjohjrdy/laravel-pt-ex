webpackJsonp([5],{I7eg:function(t,s){},RWkA:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("Xxa5"),a=e.n(i),n=(e("eqfM"),e("/QYm")),r=e("exGp"),o=e.n(r),h=e("bOdI"),c=e.n(h),u=(e("nsZj"),e("WpgC"),e("I7eg"),e("o69Z")),l=e("RP/J"),d=e("JOBW"),g=e("vwLT"),p=e("pIDD"),f=Object(u.b)("pull-refresh"),v=f[0],_=f[1],m=f[2],b=["pulling","loosing","success"],S=v({mixins:[g.a],props:{disabled:Boolean,successText:String,pullingText:String,loosingText:String,loadingText:String,value:{type:Boolean,required:!0},successDuration:{type:[Number,String],default:500},animationDuration:{type:[Number,String],default:300},headHeight:{type:[Number,String],default:50}},data:function(){return{status:"normal",distance:0,duration:0}},computed:{touchable:function(){return"loading"!==this.status&&"success"!==this.status&&!this.disabled},headStyle:function(){if(50!==this.headHeight)return{height:this.headHeight+"px"}}},watch:{value:function(t){this.duration=this.animationDuration,t?this.setStatus(+this.headHeight,!0):this.slots("success")||this.successText?this.showSuccessTip():this.setStatus(0,!1)}},mounted:function(){this.bindTouchEvent(this.$refs.track),this.scrollEl=Object(d.b)(this.$el)},methods:{checkPullStart:function(t){this.ceiling=0===Object(d.a)(this.scrollEl),this.ceiling&&(this.duration=0,this.touchStart(t))},onTouchStart:function(t){this.touchable&&this.checkPullStart(t)},onTouchMove:function(t){this.touchable&&(this.ceiling||this.checkPullStart(t),this.touchMove(t),this.ceiling&&this.deltaY>=0&&"vertical"===this.direction&&(Object(l.c)(t),this.setStatus(this.ease(this.deltaY))))},onTouchEnd:function(){var t=this;this.touchable&&this.ceiling&&this.deltaY&&(this.duration=this.animationDuration,"loosing"===this.status?(this.setStatus(+this.headHeight,!0),this.$emit("input",!0),this.$nextTick(function(){t.$emit("refresh")})):this.setStatus(0))},ease:function(t){var s=+this.headHeight;return t>s&&(t=t<2*s?s+(t-s)/2:1.5*s+(t-2*s)/4),Math.round(t)},setStatus:function(t,s){var e;e=s?"loading":0===t?"normal":t<this.headHeight?"pulling":"loosing",this.distance=t,e!==this.status&&(this.status=e)},genStatus:function(){var t=this.$createElement,s=this.status,e=this.distance,i=this.slots(s,{distance:e});if(i)return i;var a=[],n=this[s+"Text"]||m(s);return-1!==b.indexOf(s)&&a.push(t("div",{class:_("text")},[n])),"loading"===s&&a.push(t(p.a,{attrs:{size:"16"}},[n])),a},showSuccessTip:function(){var t=this;this.status="success",setTimeout(function(){t.setStatus(0)},this.successDuration)}},render:function(){var t=arguments[0],s={transitionDuration:this.duration+"ms",transform:this.distance?"translate3d(0,"+this.distance+"px, 0)":""};return t("div",{class:_()},[t("div",{ref:"track",class:_("track"),style:s},[t("div",{class:_("head"),style:this.headStyle},[this.genStatus()]),this.slots()])])}}),x={name:"",data:function(){return{app_id:"",package_id:"",isMore:!1,isLoading:!1,loadText:"",orderList:[],lastPage:1,page:1}},components:c()({},S.name,S),mounted:function(){this.app_id=this.$route.query.app_id,this.package_id=this.$route.query.package_id,this.getMemberCny(),window.addEventListener("scroll",this.handleScroll,!0)},beforeDestroy:function(){window.removeEventListener("scroll",this.handleScroll,!0)},computed:{},methods:{getMemberCny:function(){var t=this;return o()(a.a.mark(function s(){var e,i,r,o,h;return a.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return(e=t).bus.$emit("loading",!0),e.isMore=!1,e.loadText="加载中...",i='{"app_id": "'+e.app_id+'"}',s.next=7,e.ajaxGet("wx_robot_orders?page="+e.page,i,{});case 7:if(200==(r=s.sent).data.code){for(o=r.data.data,h=0;h<o.data.length;h++)e.orderList.push(o.data[h]);e.lastPage=o.last_page,e.page=o.current_page,e.isMore=!0}else e.isMore=!0,Object(n.a)(r.data.msg);e.bus.$emit("loading",!1),e.loadText="~已经到底咯~",e.isLoading&&(Object(n.a)("刷新成功"),e.isLoading=!1);case 12:case"end":return s.stop()}},s,t)}))()},onRefresh:function(){this.orderList=[],this.lastPage=1,this.page=1,this.getMemberCny()},handleScroll:function(t){t.target.scrollTop+t.target.clientHeight==t.target.scrollHeight&&(this.lastPage>this.page?(this.page++,this.getMemberCny()):this.loadText="~已经到底咯~")}}},T={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"wrap"},[e("article",{staticClass:"main open_list_box"},[e("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(s){t.isLoading=s},expression:"isLoading"}},[t.orderList.length>0?e("div",{staticClass:"list_item"},[e("ul",{staticClass:"one_list"},t._l(t.orderList,function(s,i){return e("li",{key:i},[e("h3",[t._v(t._s(s.title))]),t._v(" "),e("h4",[t._v("实付金额："+t._s(t._f("addZero")(s.real_price))+"元")]),t._v(" "),e("p",[t._v("订单号："+t._s(s.order_id))]),t._v(" "),e("p",[t._v("创建时间："+t._s(s.created_at))]),t._v(" "),e("div",{staticClass:"type",class:2==s.status||5==s.status?"type_b":"type_a"},[t._v(t._s(s.order_status))])])}),0),t._v(" "),e("div",{staticClass:"list_bottom"},[t._v(t._s(t.loadText))])]):e("div",[t.isMore?e("div",{staticClass:"data_null"},[e("p",[t._v("~暂无记录~")])]):t._e()])])],1)])},staticRenderFns:[]};var y=e("VU/8")(x,T,!1,function(t){e("ZM/K")},"data-v-7269249e",null);s.default=y.exports},"ZM/K":function(t,s){}});