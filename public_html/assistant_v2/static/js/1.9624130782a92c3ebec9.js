webpackJsonp([1],{"3IMD":function(t,e){},"3gWi":function(t,e,n){"use strict";var i=n("nsZj"),a=(n.n(i),n("WpgC")),o=(n.n(a),n("yU4Z"));n.n(o)},"4rJS":function(t,e){},BOS0:function(t,e){},HZGa:function(t,e,n){"use strict";var i=n("nsZj"),a=(n.n(i),n("ZfdV"));n.n(a)},JKiR:function(t,e){},R5i7:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("mvHQ"),o=n.n(a),s=n("Xxa5"),r=n.n(s),c=(n("XmAh"),n("il3B")),l=(n("eqfM"),n("/QYm")),u=n("exGp"),d=n.n(u),h=n("bOdI"),p=n.n(h),g=(n("le1z"),n("hZxG")),v=(n("HZGa"),n("pykS")),f=(n("mMXg"),n("qYlo")),m=(n("3gWi"),n("ZxCb")),b={name:"",data:function(){return{userd:"",packaged:"",groupList:"",groupNewList:[],groupCheckList:[],checked:!1,result:"",popupShow:!1,isMore:!1,page:0,lastPage:1,loadText:""}},components:(i={},p()(i,m.a.name,m.a),p()(i,f.a.name,f.a),p()(i,v.a.name,v.a),p()(i,g.a.name,g.a),i),mounted:function(){this.userd=JSON.parse(this.$route.query.userd),this.packaged=this.$route.query.packaged,0==this.userd.group_flag?this.checked=!1:this.checked=!0,this.getWxrobotCheckList()},beforeDestroy:function(){window.removeEventListener("scroll",this.handleScroll,!0)},computed:{},methods:{getWxrobotList:function(t){var e=this;return d()(r.a.mark(function n(){var i,a,o;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!((i=e).groupCheckList.length>10)){n.next=4;break}return Object(l.a)("发单群已达上限！"),n.abrupt("return");case 4:if(i.bus.$emit("loading",!0),window.addEventListener("scroll",i.handleScroll,!0),0!=t){n.next=14;break}return a='{"app_id":"'+i.userd.app_id+'", "method":"list.group"}',n.next=10,i.ajaxPost("wx_robot_get_way",a,{});case 10:200==(o=n.sent).data.code?(i.groupList=o.data.data,i.lastPage=Math.ceil(o.data.data.length/5-1),i.getWxrobotNewList()):c.a.alert({title:"温馨提示",message:o.data.msg}).then(function(){i.$router.go(-1)}),n.next=15;break;case 14:i.getWxrobotNewList();case 15:case"end":return n.stop()}},n,e)}))()},getWxrobotNewList:function(){var t=this;return d()(r.a.mark(function e(){var n,i,a,s,c,u,d;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t).isMore=!1,n.loadText="加载中...",i=n.groupList.slice(5*n.page,5*n.page+5),a='{"app_id":"'+n.userd.app_id+'", "user_names":'+o()(i)+', "method":"list.group.detail"}',l.a.loading({message:"加载中...",forbidClick:!0}),e.next=8,n.ajaxPost("wx_robot_get_way",a,{});case 8:if(200==(s=e.sent).data.code){for(c=s.data.data,u=0;u<c.length;u++)n.groupNewList[c[u].checked]=!1,n.groupNewList.push(c[u]);for(u=0;u<n.groupNewList.length;u++)for(d=0;d<n.groupCheckList.length;d++)n.groupCheckList[d].user_name==n.groupNewList[u].userName&&(n.groupNewList[u].checked=!0);n.popupShow=!0,n.isMore=!0}else Object(l.a)(s.data.msg),n.isMore=!0;l.a.clear(),n.bus.$emit("loading",!1),n.loadText="~已经到底咯~";case 13:case"end":return e.stop()}},e,t)}))()},getWxrobotCheckList:function(){var t=this;return d()(r.a.mark(function e(){var n,i,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i='{"app_id":"'+(n=t).userd.app_id+'", "wx_id":"'+n.userd.wx_id+'", "method":"list.check.group"}',e.next=4,n.ajaxPost("wx_robot_get_way",i,{});case 4:200==(a=e.sent).data.code?n.groupCheckList=a.data.data:Object(l.a)(a.data.msg);case 6:case"end":return e.stop()}},e,t)}))()},getWxrobotWay:function(t){var e=this;return d()(r.a.mark(function n(){var i,a,o;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return(i=e).bus.$emit("loading",!0),a='{"app_id":"'+i.userd.app_id+'", "status":"'+t+'", "method":"change.group"}',n.next=5,i.ajaxPost("wx_robot_get_way",a,{});case 5:200==(o=n.sent).data.code||(Object(l.a)(o.data.msg),setTimeout(function(){i.$router.go(-1)},1500)),i.bus.$emit("loading",!1);case 8:case"end":return n.stop()}},n,e)}))()},onInput:function(t){t?this.getWxrobotWay(1):this.getWxrobotWay(0)},delCircle:function(t,e,n){var i=this;c.a.confirm({title:"确认删除",message:"您将删除【"+e+"】发单群？",confirmButtonText:"确定删除",cancelButtonText:"取消",width:"7.5rem"}).then(function(){i.removeWxrobotGroup(t,e,n)}).catch(function(){})},removeWxrobotGroup:function(t,e,n){var i=this;return d()(r.a.mark(function e(){var a,o,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=i).bus.$emit("loading",!0),o='{"app_id":"'+a.userd.app_id+'", "wx_id":"'+a.userd.wx_id+'", "method":"remove.group", "user_name":"'+t+'"}',e.next=5,a.ajaxPost("wx_robot_get_way",o,{});case 5:200==(s=e.sent).data.code?(Object(l.a)("删除成功"),a.groupCheckList.splice(n,1)):Object(l.a)(s.data.msg),a.bus.$emit("loading",!1);case 8:case"end":return e.stop()}},e,i)}))()},closePopup:function(){this.page=0,window.removeEventListener("scroll",this.handleScroll,!0),this.groupNewList=[],this.popupShow=!1},labelActive:function(){var t=this;return d()(r.a.mark(function e(){var n,i,a,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=(n=t).result){e.next=4;break}return Object(l.a)("您还没有选择发单群"),e.abrupt("return");case 4:if(""!=(i=n.groupNewList[n.result-1]).nikeName){e.next=8;break}return Object(l.a)("请返回微信，设置群名！"),e.abrupt("return");case 8:return n.bus.$emit("loading",!0),n.closePopup(),n.result="",a='{"app_id":"'+n.userd.app_id+'", "wx_id":"'+n.userd.wx_id+'", "method":"set.group", "user_name":"'+i.userName+'", "header_img":"'+i.smallHead+'", "nike_name":"'+n.encodeUnicode(i.nikeName)+'"}',console.log(a),e.next=15,n.ajaxPost("wx_robot_get_way",a,{});case 15:200==(o=e.sent).data.code?(Object(l.a)("添加成功"),n.getWxrobotCheckList()):Object(l.a)(o.data.msg),n.bus.$emit("loading",!1);case 18:case"end":return e.stop()}},e,t)}))()},encodeUnicode:function(t){for(var e=[],n=0;n<t.length;n++)e[n]=("00"+t.charCodeAt(n).toString(16)).slice(-4);return"\\u"+e.join("\\u")},handleScroll:function(t){this.isMore&&t.target.scrollHeight<=t.target.scrollTop+t.target.clientHeight+10&&"content"==t.target.className&&(this.lastPage>this.page?(this.page++,this.getWxrobotList()):this.loadText="~已经到底咯~")}}},_={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("article",{staticClass:"main index_box"},[n("div",{staticClass:"head_banner"},[n("div",{staticClass:"content"},[n("div",{staticClass:"image"},[n("img",{attrs:{src:t.userd.headUrl}})]),t._v(" "),n("div",{staticClass:"text"},[n("h3",[t._v(t._s(t.userd.nickName))]),t._v(" "),0==t.userd.login_status?n("h4",{staticClass:"offline"},[t._v("助理已离线")]):t._e(),t._v(" "),1==t.userd.login_status?n("h4",{staticClass:"online"},[t._v("助理在线中...")]):t._e(),t._v(" "),t.userd.expiry_time?n("p",[t._v("有效期："+t._s(t.userd.expiry_time.substring(0,10)))]):t._e()]),t._v(" "),n("router-link",{staticClass:"btn",attrs:{to:{path:"Open",query:{app_id:t.userd.app_id,packaged:t.packaged}}}},[t._v("立即续费")])],1)]),t._v(" "),n("div",{staticClass:"open_box"},[n("div",{staticClass:"text"},[t._v("智能发群助手")]),t._v(" "),n("div",{staticClass:"switch"},[n("van-switch",{attrs:{size:".6rem"},on:{input:t.onInput},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}})],1)]),t._v(" "),t.checked?n("div",{staticClass:"ind3_box"},[n("div",{staticClass:"title"},[n("em",[t._v("发单群列表")]),t._v(" （"+t._s(t.groupCheckList.length)+"/10）")]),t._v(" "),t._l(t.groupCheckList,function(e,i){return n("div",{key:i,staticClass:"group_line"},[n("div",{staticClass:"image"},[n("img",{attrs:{src:e.header_img}})]),t._v(" "),n("div",{staticClass:"cont"},[n("div",{staticClass:"tit overflowTextOne"},[t._v(t._s(e.nike_name))]),t._v(" "),n("div",{staticClass:"btn"},[n("em",{on:{click:function(n){return t.delCircle(e.user_name,e.nike_name,i)}}},[t._v("删除")])])])])}),t._v(" "),n("div",{staticClass:"add_btn",on:{click:function(e){return t.getWxrobotList(0)}}},[n("i",[t._v("新增发单群")])])],2):n("div",[t._m(0)])]),t._v(" "),n("van-popup",{attrs:{"close-on-click-overlay":!1},model:{value:t.popupShow,callback:function(e){t.popupShow=e},expression:"popupShow"}},[n("div",{staticClass:"circle_popup group_popup"},[n("div",{staticClass:"title"},[t._v("新增发单群")]),t._v(" "),n("div",{staticClass:"tit"},[t._v("选择发单群")]),t._v(" "),n("div",{staticClass:"content"},[n("van-radio-group",{attrs:{"icon-size":".4rem"},model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},t._l(t.groupNewList,function(e,i){return n("van-radio",{key:i,attrs:{name:i+1,disabled:e.checked}},[t._v(t._s(e.nikeName))])}),1),t._v(" "),n("div",{staticClass:"list_bottom",staticStyle:{padding:"0.14rem 0 0","margin-top":".1rem","font-size":".34rem",color:"#666"}},[t._v(t._s(t.loadText))])],1),t._v(" "),n("div",{staticClass:"button"},[n("div",{staticClass:"btn",on:{click:t.closePopup}},[t._v("取消")]),t._v(" "),n("div",{staticClass:"btn",on:{click:t.labelActive}},[t._v("选好了")])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"data_null"},[e("h3",[this._v("发单助手-已关闭")]),this._v(" "),e("p",[this._v("请点击上方按钮开启")])])}]};var x=n("VU/8")(b,_,!1,function(t){n("BOS0")},"data-v-4282e534",null);e.default=x.exports},XmAh:function(t,e,n){"use strict";var i=n("nsZj"),a=(n.n(i),n("02pT")),o=(n.n(a),n("T2s0")),s=(n.n(o),n("1H7Z")),r=(n.n(s),n("hW8u")),c=(n.n(r),n("WpgC")),l=(n.n(c),n("3IMD")),u=(n.n(l),n("JKiR"));n.n(u)},ZfdV:function(t,e){},ZxCb:function(t,e,n){"use strict";var i=n("o69Z"),a=n("V+2B"),o={size:[Number,String],value:null,loading:Boolean,disabled:Boolean,activeColor:String,inactiveColor:String,activeValue:{type:null,default:!0},inactiveValue:{type:null,default:!1}},s=n("X6Tt"),r=n("pIDD"),c=Object(i.b)("switch"),l=c[0],u=c[1];e.a=l({mixins:[s.a],props:o,computed:{checked:function(){return this.value===this.activeValue},style:function(){return{fontSize:Object(i.a)(this.size),backgroundColor:this.checked?this.activeColor:this.inactiveColor}}},methods:{onClick:function(t){if(this.$emit("click",t),!this.disabled&&!this.loading){var e=this.checked?this.inactiveValue:this.activeValue;this.$emit("input",e),this.$emit("change",e)}},genLoading:function(){var t=this.$createElement;if(this.loading){var e=this.checked?this.activeColor||a.a:this.inactiveColor||"";return t(r.a,{class:u("loading"),attrs:{color:e}})}}},render:function(){var t=arguments[0],e=this.checked,n=this.loading,i=this.disabled;return t("div",{class:u({on:e,loading:n,disabled:i}),attrs:{role:"switch","aria-checked":String(e)},style:this.style,on:{click:this.onClick}},[t("div",{class:u("node")},[this.genLoading()])])}})},hZxG:function(t,e,n){"use strict";var i=n("o69Z"),a=n("Vj2t"),o=Object(i.b)("radio"),s=o[0],r=o[1];e.a=s({mixins:[Object(a.a)({bem:r,role:"radio",parent:"vanRadio"})],computed:{currentValue:{get:function(){return this.parent?this.parent.value:this.value},set:function(t){(this.parent||this).$emit("input",t)}},checked:function(){return this.currentValue===this.name}},methods:{toggle:function(){this.currentValue=this.name}}})},il3B:function(t,e,n){"use strict";var i=n("RfZZ"),a=n("7+uW"),o=n("o69Z"),s=n("V+2B"),r=n("CsZI"),c=n("AA6R"),l=n.n(c),u=n("rhik");function d(t){!function(t,e){var n=e.to,i=e.url,a=e.replace;if(n&&t){var o=t[a?"replace":"push"](n);o&&o.catch&&o.catch(function(t){if(t&&"NavigationDuplicated"!==t.name)throw t})}else i&&(a?location.replace(i):location.href=i)}(t.parent&&t.parent.$router,t.props)}var h={url:String,replace:Boolean,to:[String,Object]},p=n("+2ln"),g=n("pIDD"),v=Object(o.b)("button"),f=v[0],m=v[1];function b(t,e,n,i){var a,o=e.tag,r=e.icon,c=e.type,h=e.color,v=e.plain,f=e.disabled,b=e.loading,_=e.hairline,x=e.loadingText,k={};h&&(k.color=v?h:s.e,v||(k.background=h),-1!==h.indexOf("gradient")?k.border=0:k.borderColor=h);var C,w,y=[m([c,e.size,{plain:v,loading:b,disabled:f,hairline:_,block:e.block,round:e.round,square:e.square}]),(a={},a[s.c]=_,a)];return t(o,l()([{style:k,class:y,attrs:{type:e.nativeType,disabled:f},on:{click:function(t){b||f||(Object(u.a)(i,"click",t),d(i))},touchstart:function(t){Object(u.a)(i,"touchstart",t)}}},Object(u.b)(i)]),[(w=[],b?w.push(t(g.a,{class:m("loading"),attrs:{size:e.loadingSize,type:e.loadingType,color:"currentColor"}})):r&&w.push(t(p.a,{attrs:{name:r},class:m("icon")})),(C=b?x:n.default?n.default():e.text)&&w.push(t("span",{class:m("text")},[C])),w)])}b.props=Object(i.a)({},h,{text:String,icon:String,color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,nativeType:String,loadingText:String,loadingType:String,tag:{type:String,default:"button"},type:{type:String,default:"default"},size:{type:String,default:"normal"},loadingSize:{type:String,default:"20px"}});var _,x=f(b),k=Object(o.b)("dialog"),C=k[0],w=k[1],y=k[2],S=C({mixins:[Object(r.a)()],props:{title:String,width:[Number,String],message:String,className:null,callback:Function,beforeClose:Function,messageAlign:String,cancelButtonText:String,cancelButtonColor:String,confirmButtonText:String,confirmButtonColor:String,showCancelButton:Boolean,transition:{type:String,default:"van-dialog-bounce"},showConfirmButton:{type:Boolean,default:!0},overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!1}},data:function(){return{loading:{confirm:!1,cancel:!1}}},methods:{onClickOverlay:function(){this.handleAction("overlay")},handleAction:function(t){var e=this;this.$emit(t),this.value&&(this.beforeClose?(this.loading[t]=!0,this.beforeClose(t,function(n){!1!==n&&e.loading[t]&&e.onClose(t),e.loading.confirm=!1,e.loading.cancel=!1})):this.onClose(t))},onClose:function(t){this.close(),this.callback&&this.callback(t)},onOpened:function(){this.$emit("opened")},onClosed:function(){this.$emit("closed")},genButtons:function(){var t,e=this,n=this.$createElement,i=this.showCancelButton&&this.showConfirmButton;return n("div",{class:[s.d,w("footer",{buttons:i})]},[this.showCancelButton&&n(x,{attrs:{size:"large",loading:this.loading.cancel,text:this.cancelButtonText||y("cancel")},class:w("cancel"),style:{color:this.cancelButtonColor},on:{click:function(){e.handleAction("cancel")}}}),this.showConfirmButton&&n(x,{attrs:{size:"large",loading:this.loading.confirm,text:this.confirmButtonText||y("confirm")},class:[w("confirm"),(t={},t[s.b]=i,t)],style:{color:this.confirmButtonColor},on:{click:function(){e.handleAction("confirm")}}})])}},render:function(){var t,e=arguments[0];if(this.shouldRender){var n=this.message,i=this.messageAlign,a=this.slots(),s=this.slots("title")||this.title,r=s&&e("div",{class:w("header",{isolated:!n&&!a})},[s]),c=(a||n)&&e("div",{class:w("content")},[a||e("div",{domProps:{innerHTML:n},class:w("message",(t={"has-title":s},t[i]=i,t))})]);return e("transition",{attrs:{name:this.transition},on:{afterEnter:this.onOpened,afterLeave:this.onClosed}},[e("div",{directives:[{name:"show",value:this.value}],attrs:{role:"dialog","aria-labelledby":this.title||n},class:[w(),this.className],style:{width:Object(o.a)(this.width)}},[r,c,this.genButtons()])])}}});function O(t){return o.g?Promise.resolve():new Promise(function(e,n){var o;_&&(o=_.$el,document.body.contains(o))||(_&&_.$destroy(),(_=new(a.a.extend(S))({el:document.createElement("div"),propsData:{lazyRender:!1}})).$on("input",function(t){_.value=t})),Object(i.a)(_,O.currentOptions,t,{resolve:e,reject:n})})}O.defaultOptions={value:!0,title:"",width:"",message:"",overlay:!0,className:"",lockScroll:!0,transition:"van-dialog-bounce",beforeClose:null,overlayClass:"",overlayStyle:null,messageAlign:"",getContainer:"body",cancelButtonText:"",cancelButtonColor:null,confirmButtonText:"",confirmButtonColor:null,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!1,closeOnClickOverlay:!1,callback:function(t){_["confirm"===t?"resolve":"reject"](t)}},O.alert=O,O.confirm=function(t){return O(Object(i.a)({showCancelButton:!0},t))},O.close=function(){_&&(_.value=!1)},O.setDefaultOptions=function(t){Object(i.a)(O.currentOptions,t)},O.resetDefaultOptions=function(){O.currentOptions=Object(i.a)({},O.defaultOptions)},O.resetDefaultOptions(),O.install=function(){a.a.use(S)},O.Component=S,a.a.prototype.$dialog=O;e.a=O},le1z:function(t,e,n){"use strict";var i=n("nsZj"),a=(n.n(i),n("T2s0")),o=(n.n(a),n("1H7Z")),s=(n.n(o),n("4rJS"));n.n(s)},mvHQ:function(t,e,n){t.exports={default:n("qkKv"),__esModule:!0}},pykS:function(t,e,n){"use strict";var i=n("o69Z"),a=n("X6Tt"),o=n("1SJR"),s=Object(i.b)("radio-group"),r=s[0],c=s[1];e.a=r({mixins:[Object(o.b)("vanRadio"),a.a],props:{value:null,disabled:Boolean,direction:String,checkedColor:String,iconSize:[Number,String]},watch:{value:function(t){this.$emit("change",t)}},render:function(){return(0,arguments[0])("div",{class:c([this.direction]),attrs:{role:"radiogroup"}},[this.slots()])}})},qkKv:function(t,e,n){var i=n("FeBl"),a=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return a.stringify.apply(a,arguments)}},yU4Z:function(t,e){}});