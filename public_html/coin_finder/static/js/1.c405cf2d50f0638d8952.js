webpackJsonp([1],{"1SJR":function(t,e,i){"use strict";e.a=function(t,e){var i,n;void 0===e&&(e={});var r=e.indexKey||"index";return s.a.extend({inject:(i={},i[t]={default:null},i),computed:(n={parent:function(){return this.disableBindRelation?null:this[t]}},n[r]=function(){return this.bindRelation(),this.parent.children.indexOf(this)},n),mounted:function(){this.bindRelation()},beforeDestroy:function(){var t=this;this.parent&&(this.parent.children=this.parent.children.filter(function(e){return e!==t}))},methods:{bindRelation:function(){if(this.parent&&-1===this.parent.children.indexOf(this)){var t=[].concat(this.parent.children,[this]),e=function(t){var e=[];return function t(i){i.forEach(function(i){e.push(i),i.children&&t(i.children)})}(t),e}(this.parent.slots());t.sort(function(t,i){return e.indexOf(t.$vnode)-e.indexOf(i.$vnode)}),this.parent.children=t}}}})},e.b=function(t){return{provide:function(){var e;return(e={})[t]=this,e},data:function(){return{children:[]}}}};var s=i("7+uW")},"3X7g":function(t,e,i){"use strict";(function(t){e.b=l,e.a=function(t){o.call(r,t)};var s=i("o69Z"),n=Date.now();var r=s.g?t:window,a=r.requestAnimationFrame||function(t){var e=Date.now(),i=Math.max(0,16-(e-n)),s=setTimeout(t,i);return n=e+i,s},o=r.cancelAnimationFrame||r.clearTimeout;function l(t){return a.call(r,t)}}).call(e,i("DuR2"))},"6gXq":function(t,e){},I7eg:function(t,e){},S6Ip:function(t,e){},bFPQ:function(t,e){},gaNV:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,n=i("Xxa5"),r=i.n(n),a=i("exGp"),o=i.n(a),l=i("bOdI"),c=i.n(l),h=(i("eqfM"),i("/QYm")),u=(i("nsZj"),i("WpgC"),i("I7eg"),i("o69Z")),d=i("RP/J"),f=i("JOBW"),p=i("vwLT"),v=i("pIDD"),g=Object(u.b)("pull-refresh"),b=g[0],m=g[1],x=g[2],S=["pulling","loosing","success"],y=b({mixins:[p.a],props:{disabled:Boolean,successText:String,pullingText:String,loosingText:String,loadingText:String,value:{type:Boolean,required:!0},successDuration:{type:[Number,String],default:500},animationDuration:{type:[Number,String],default:300},headHeight:{type:[Number,String],default:50}},data:function(){return{status:"normal",distance:0,duration:0}},computed:{touchable:function(){return"loading"!==this.status&&"success"!==this.status&&!this.disabled},headStyle:function(){if(50!==this.headHeight)return{height:this.headHeight+"px"}}},watch:{value:function(t){this.duration=this.animationDuration,t?this.setStatus(+this.headHeight,!0):this.slots("success")||this.successText?this.showSuccessTip():this.setStatus(0,!1)}},mounted:function(){this.bindTouchEvent(this.$refs.track),this.scrollEl=Object(f.d)(this.$el)},methods:{checkPullStart:function(t){this.ceiling=0===Object(f.c)(this.scrollEl),this.ceiling&&(this.duration=0,this.touchStart(t))},onTouchStart:function(t){this.touchable&&this.checkPullStart(t)},onTouchMove:function(t){this.touchable&&(this.ceiling||this.checkPullStart(t),this.touchMove(t),this.ceiling&&this.deltaY>=0&&"vertical"===this.direction&&(Object(d.c)(t),this.setStatus(this.ease(this.deltaY))))},onTouchEnd:function(){var t=this;this.touchable&&this.ceiling&&this.deltaY&&(this.duration=this.animationDuration,"loosing"===this.status?(this.setStatus(+this.headHeight,!0),this.$emit("input",!0),this.$nextTick(function(){t.$emit("refresh")})):this.setStatus(0))},ease:function(t){var e=+this.headHeight;return t>e&&(t=t<2*e?e+(t-e)/2:1.5*e+(t-2*e)/4),Math.round(t)},setStatus:function(t,e){var i;i=e?"loading":0===t?"normal":t<this.headHeight?"pulling":"loosing",this.distance=t,i!==this.status&&(this.status=i)},genStatus:function(){var t=this.$createElement,e=this.status,i=this.distance,s=this.slots(e,{distance:i});if(s)return s;var n=[],r=this[e+"Text"]||x(e);return-1!==S.indexOf(e)&&n.push(t("div",{class:m("text")},[r])),"loading"===e&&n.push(t(v.a,{attrs:{size:"16"}},[r])),n},showSuccessTip:function(){var t=this;this.status="success",setTimeout(function(){t.setStatus(0)},this.successDuration)}},render:function(){var t=arguments[0],e={transitionDuration:this.duration+"ms",transform:this.distance?"translate3d(0,"+this.distance+"px, 0)":""};return t("div",{class:m()},[t("div",{ref:"track",class:m("track"),style:e},[t("div",{class:m("head"),style:this.headStyle},[this.genStatus()]),this.slots()])])}}),_=(i("T2s0"),i("S6Ip"),i("bFPQ"),i("3X7g"));var T=i("n8HW");var O,w=i("V+2B"),C=i("1SJR"),I=i("5Fm4"),j=i("Pen3"),k=Object(u.b)("tab"),L=k[0],$=k[1],B=L({props:{dot:Boolean,type:String,info:[Number,String],color:String,title:String,isActive:Boolean,ellipsis:Boolean,disabled:Boolean,scrollable:Boolean,activeColor:String,inactiveColor:String,swipeThreshold:[Number,String]},computed:{style:function(){var t={},e=this.color,i=this.isActive,s="card"===this.type;e&&s&&(t.borderColor=e,this.disabled||(i?t.backgroundColor=e:t.color=e));var n=i?this.activeColor:this.inactiveColor;return n&&(t.color=n),this.scrollable&&this.ellipsis&&(t.flexBasis=88/this.swipeThreshold+"%"),t}},methods:{onClick:function(){this.$emit("click")}},render:function(){var t=arguments[0];return t("div",{attrs:{role:"tab","aria-selected":this.isActive},class:[$({active:this.isActive,disabled:this.disabled,complete:!this.ellipsis}),{"van-ellipsis":this.ellipsis}],style:this.style,on:{click:this.onClick}},[t("span",{class:$("text")},[this.slots()||this.title,t(j.a,{attrs:{dot:this.dot,info:this.info}})])])}}),N=Object(u.b)("sticky"),A=N[0],z=N[1],D=A({mixins:[Object(I.a)(function(t){this.scroller||(this.scroller=Object(f.d)(this.$el)),t(this.scroller,"scroll",this.onScroll,!0),this.onScroll()})],props:{zIndex:[Number,String],container:null,offsetTop:{type:[Number,String],default:0}},data:function(){return{fixed:!1,height:0,transform:0}},computed:{style:function(){if(this.fixed){var t={};return Object(u.d)(this.zIndex)&&(t.zIndex=this.zIndex),this.offsetTop&&this.fixed&&(t.top=this.offsetTop+"px"),this.transform&&(t.transform="translate3d(0, "+this.transform+"px, 0)"),t}}},methods:{onScroll:function(){var t=this;this.height=this.$el.offsetHeight;var e=this.container,i=+this.offsetTop,s=Object(f.c)(window),n=Object(f.a)(this.$el),r=function(){t.$emit("scroll",{scrollTop:s,isFixed:t.fixed})};if(e){var a=n+e.offsetHeight;if(s+i+this.height>a){var o=this.height+s-a;return o<this.height?(this.fixed=!0,this.transform=-(o+i)):this.fixed=!1,void r()}}s+i>n?(this.fixed=!0,this.transform=0):this.fixed=!1,r()}},render:function(){var t=arguments[0],e=this.fixed;return t("div",{style:{height:e?this.height+"px":null}},[t("div",{class:z({fixed:e}),style:this.style},[this.slots()])])}}),M=i("RfZZ"),H=Object(u.b)("tabs"),P=H[0],R=H[1],E=P({mixins:[p.a],props:{count:Number,duration:[Number,String],animated:Boolean,swipeable:Boolean,currentIndex:Number},computed:{style:function(){if(this.animated)return{transform:"translate3d("+-1*this.currentIndex*100+"%, 0, 0)",transitionDuration:this.duration+"s"}},listeners:function(){if(this.swipeable)return{touchstart:this.touchStart,touchmove:this.touchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchEnd}}},methods:{onTouchEnd:function(){var t=this.direction,e=this.deltaX,i=this.currentIndex;"horizontal"===t&&this.offsetX>=50&&(e>0&&0!==i?this.$emit("change",i-1):e<0&&i!==this.count-1&&this.$emit("change",i+1))},genChildren:function(){var t=this.$createElement;return this.animated?t("div",{class:R("track"),style:this.style},[this.slots()]):this.slots()}},render:function(){return(0,arguments[0])("div",{class:R("content",{animated:this.animated}),on:Object(M.a)({},this.listeners)},[this.genChildren()])}}),W=Object(u.b)("tabs"),F=W[0],X=W[1],q=F({mixins:[Object(C.b)("vanTabs"),Object(I.a)(function(t){this.scroller||(this.scroller=Object(f.d)(this.$el)),t(window,"resize",this.resize,!0),this.scrollspy&&t(this.scroller,"scroll",this.onScroll,!0)})],model:{prop:"active"},props:{color:String,sticky:Boolean,animated:Boolean,swipeable:Boolean,scrollspy:Boolean,background:String,lineWidth:[Number,String],lineHeight:[Number,String],titleActiveColor:String,titleInactiveColor:String,type:{type:String,default:"line"},active:{type:[Number,String],default:0},border:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},duration:{type:[Number,String],default:.3},offsetTop:{type:[Number,String],default:0},lazyRender:{type:Boolean,default:!0},swipeThreshold:{type:[Number,String],default:4}},data:function(){return{position:"",currentIndex:null,lineStyle:{backgroundColor:this.color}}},computed:{scrollable:function(){return this.children.length>this.swipeThreshold||!this.ellipsis},navStyle:function(){return{borderColor:this.color,background:this.background}},currentName:function(){var t=this.children[this.currentIndex];if(t)return t.computedName},scrollOffset:function(){return this.sticky?+this.offsetTop+this.tabHeight:0}},watch:{color:"setLine",active:function(t){t!==this.currentName&&this.setCurrentIndexByName(t)},children:function(){var t=this;this.setCurrentIndexByName(this.currentName||this.active),this.setLine(),this.$nextTick(function(){t.scrollIntoView(!0)})},currentIndex:function(){this.scrollIntoView(),this.setLine(),this.stickyFixed&&!this.scrollspy&&Object(f.g)(Math.ceil(Object(f.a)(this.$el)-this.offsetTop))},scrollspy:function(t){t?Object(d.b)(this.scroller,"scroll",this.onScroll,!0):Object(d.a)(this.scroller,"scroll",this.onScroll)}},mounted:function(){this.onShow()},activated:function(){this.onShow(),this.setLine()},methods:{resize:function(){this.setLine()},onShow:function(){var t=this;this.$nextTick(function(){t.inited=!0,t.tabHeight=Object(f.e)(t.$refs.wrap),t.scrollIntoView(!0)})},setLine:function(){var t=this,e=this.inited;this.$nextTick(function(){var i=t.$refs.titles;if(i&&i[t.currentIndex]&&"line"===t.type&&(s=t.$el,n=window.getComputedStyle(s),r="none"===n.display,a=null===s.offsetParent&&"fixed"!==n.position,!r&&!a)){var s,n,r,a,o=i[t.currentIndex].$el,l=t.lineWidth,c=t.lineHeight,h=Object(u.d)(l)?l:o.offsetWidth/2,d=o.offsetLeft+o.offsetWidth/2,f={width:Object(u.a)(h),backgroundColor:t.color,transform:"translateX("+d+"px) translateX(-50%)"};if(e&&(f.transitionDuration=t.duration+"s"),Object(u.d)(c)){var p=Object(u.a)(c);f.height=p,f.borderRadius=p}t.lineStyle=f}})},setCurrentIndexByName:function(t){var e=this.children.filter(function(e){return e.computedName===t}),i=(this.children[0]||{}).index||0;this.setCurrentIndex(e.length?e[0].index:i)},setCurrentIndex:function(t){if(t=this.findAvailableTab(t),Object(u.d)(t)&&t!==this.currentIndex){var e=null!==this.currentIndex;this.currentIndex=t,this.$emit("input",this.currentName),e&&this.$emit("change",this.currentName,this.children[t].title)}},findAvailableTab:function(t){for(var e=t<this.currentIndex?-1:1;t>=0&&t<this.children.length;){if(!this.children[t].disabled)return t;t+=e}},onClick:function(t){var e=this.children[t],i=e.title,s=e.disabled,n=e.computedName;s?this.$emit("disabled",n,i):(this.setCurrentIndex(t),this.scrollToCurrentContent(),this.$emit("click",n,i))},scrollIntoView:function(t){var e=this.$refs.titles;if(this.scrollable&&e&&e[this.currentIndex]){var i=this.$refs.nav,n=e[this.currentIndex].$el;!function(t,e,i){Object(_.a)(s);var n=0,r=t.scrollLeft,a=0===i?1:Math.round(1e3*i/16);!function i(){t.scrollLeft+=(e-r)/a,++n<a&&(s=Object(_.b)(i))}()}(i,n.offsetLeft-(i.offsetWidth-n.offsetWidth)/2,t?0:+this.duration)}},onSticktScroll:function(t){this.stickyFixed=t.isFixed,this.$emit("scroll",t)},scrollToCurrentContent:function(){var t=this;if(this.scrollspy){this.clickedScroll=!0;var e=this.children[this.currentIndex],i=e&&e.$el;if(i)!function(t,e,i){var s=Object(f.b)(),n=s<t,r=0===e?1:Math.round(1e3*e/16),a=(t-s)/r;!function e(){s+=a,(n&&s>t||!n&&s<t)&&(s=t),Object(f.g)(s),n&&s<t||!n&&s>t?Object(_.b)(e):i&&i()}()}(Math.ceil(Object(f.a)(i))-this.scrollOffset,+this.duration,function(){t.clickedScroll=!1})}},onScroll:function(){if(this.scrollspy&&!this.clickedScroll){var t=this.getCurrentIndexOnScroll();this.setCurrentIndex(t)}},getCurrentIndexOnScroll:function(){for(var t=this.children,e=0;e<t.length;e++){if(Object(f.f)(t[e].$el)>this.scrollOffset)return 0===e?0:e-1}return t.length-1}},render:function(){var t,e=this,i=arguments[0],s=this.type,n=this.ellipsis,r=this.animated,a=this.scrollable,o=this.children.map(function(t,r){return i(B,{ref:"titles",refInFor:!0,attrs:{type:s,dot:t.dot,info:t.info,title:t.title,color:e.color,isActive:r===e.currentIndex,ellipsis:n,disabled:t.disabled,scrollable:a,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,swipeThreshold:e.swipeThreshold},style:t.titleStyle,scopedSlots:{default:function(){return t.slots("title")}},on:{click:function(){e.onClick(r),Object(T.b)(t.$router,t)}}})}),l=i("div",{ref:"wrap",class:[X("wrap",{scrollable:a}),(t={},t[w.e]="line"===s&&this.border,t)]},[i("div",{ref:"nav",attrs:{role:"tablist"},class:X("nav",[s]),style:this.navStyle},[this.slots("nav-left"),o,"line"===s&&i("div",{class:X("line"),style:this.lineStyle}),this.slots("nav-right")])]);return i("div",{class:X([s])},[this.sticky?i(D,{attrs:{container:this.$el,offsetTop:this.offsetTop},on:{scroll:this.onSticktScroll}},[l]):l,i(E,{attrs:{count:this.children.length,animated:r,duration:this.duration,swipeable:this.swipeable,currentIndex:this.currentIndex},on:{change:this.setCurrentIndex}},[this.slots()])])}}),V=(i("6gXq"),Object(u.b)("tab")),J=V[0],Y=V[1],Z=J({mixins:[Object(C.a)("vanTabs")],props:Object(M.a)({},T.c,{dot:Boolean,info:[Number,String],name:[Number,String],title:String,titleStyle:null,disabled:Boolean}),data:function(){return{inited:!1}},computed:{computedName:function(){return Object(u.d)(this.name)?this.name:this.index},isActive:function(){return this.computedName===this.parent.currentName}},watch:{"parent.currentIndex":function(){this.inited=this.inited||this.isActive},title:function(){this.parent.setLine()},inited:function(t){var e=this;this.parent.lazyRender&&t&&this.$nextTick(function(){e.parent.$emit("rendered",e.computedName,e.title)})}},render:function(t){var e=this.slots,i=this.parent,s=this.isActive,n=this.inited||i.scrollspy||!i.lazyRender,r=i.scrollspy||s,a=n?e():t();return i.animated?t("div",{attrs:{role:"tabpanel","aria-hidden":!s},class:Y("pane-wrapper",{inactive:!s})},[t("div",{class:Y("pane")},[a])]):t("div",{directives:[{name:"show",value:r}],attrs:{role:"tabpanel"},class:Y("pane")},[a])}}),Q={name:"",data:function(){return{app_id:"",active:0,prizeListA:[],lastPageA:1,pageA:1,prizeListB:[],lastPageB:1,pageB:1,isMore:!1,isLoading:!1,loadText:""}},components:(O={},c()(O,Z.name,Z),c()(O,q.name,q),c()(O,y.name,y),c()(O,h.a.name,h.a),O),computed:{},mounted:function(){this.app_id=JSON.parse(localStorage.getItem("userInfo")).id,window.addEventListener("scroll",this.handleScroll,!0),localStorage.getItem("orderActive")?(this.active=1,this.getTurntableLog(1)):this.getTurntableLog(2)},beforeDestroy:function(){localStorage.removeItem("orderActive"),window.removeEventListener("scroll",this.handleScroll,!0)},methods:{getTurntableLog:function(t){var e=this;return o()(r.a.mark(function i(){var s,n,a,o,l;return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return(s=e).isMore=!1,s.bus.$emit("loading",!0),s.loadText="加载中...",2==t?s.page=s.pageA:1==t&&(s.page=s.pageB),n='{"app_id":"'+s.app_id+'", "type":"'+t+'"}',i.next=8,s.ajaxPost("mini_get_turntable_get_log?page="+s.page,n,{});case 8:if(200==(a=i.sent).code){if(o=a.data,2==t){for(l=0;l<o.data.length;l++)s.prizeListA.push(o.data[l]);s.lastPageA=o.last_page,s.pageA=o.current_page}else if(1==t){for(l=0;l<o.data.length;l++)s.prizeListB.push(o.data[l]);s.lastPageB=o.last_page,s.pageB=o.current_page}s.isMore=!0}else Object(h.a)(a.msg),s.isMore=!0;s.bus.$emit("loading",!1),s.loadText="~已经到底咯~",s.isLoading&&(Object(h.a)("刷新成功"),s.isLoading=!1);case 13:case"end":return i.stop()}},i,e)}))()},changeTabs:function(t){0==t&&this.prizeListA.length<=0?this.getTurntableLog(2):1==t&&this.prizeListB.length<=0&&this.getTurntableLog(1)},onRefresh:function(){0==this.active?(this.prizeListA=[],this.lastPageA=1,this.pageA=1,this.getTurntableLog(2)):1==this.active&&(this.prizeListB=[],this.lastPageB=1,this.pageB=1,this.getTurntableLog(1))},handleScroll:function(t){this.isMore&&t.target.scrollHeight<=t.target.scrollTop+t.target.clientHeight+10&&(0==this.active?this.lastPageA>this.pageA?(this.pageA++,this.getTurntableLog(2)):this.loadText="~已经到底咯~":1==this.active&&(this.lastPageB>this.pageB?(this.pageB++,this.getTurntableLog(1)):this.loadText="~已经到底咯~"))}},filters:{formatDate:function(t){var e=new Date(1e3*parseInt(t)),i=e.getFullYear(),s=e.getMonth()+1;s=s<10?"0"+s:s;var n=e.getDate();n=n<10?"0"+n:n;var r=e.getHours();r=r<10?"0"+r:r;var a=e.getMinutes();a=a<10?"0"+a:a;var o=e.getSeconds();return i+"-"+s+"-"+n+" "+r+":"+a+":"+(o=o<10?"0"+o:o)}}},G={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrap"},[i("article",{staticClass:"main winrecord_box"},[i("van-tabs",{attrs:{"title-inactive-color":"#666","title-active-color":"#ffb900",color:"#ffb900","line-width":".6rem","line-height":".05rem",swipeable:"",animated:"","azy-render":""},on:{change:t.changeTabs},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[i("van-tab",{attrs:{title:"非实物奖品"}},[i("div",{staticClass:"list_content"},[i("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[t.prizeListA.length>0?i("div",{staticClass:"list_item"},[t._l(t.prizeListA,function(e,s){return i("div",{key:s,staticClass:"linea"},[i("h3",[t._v(t._s(e.title))]),t._v(" "),i("h4",[t._v(t._s(e.desc))]),t._v(" "),i("p",[t._v("中奖时间："+t._s(t._f("formatDate")(e.get_time)))])])}),t._v(" "),i("div",{staticClass:"list_bottom"},[t._v(t._s(t.loadText))])],2):i("div",[t.isMore?i("div",{staticClass:"data_null"},[i("p",[t._v("暂无非实物奖品哦")])]):t._e()])])],1)]),t._v(" "),i("van-tab",{attrs:{title:"实物奖品"}},[i("div",{staticClass:"list_content"},[i("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[t.prizeListB.length>0?i("div",{staticClass:"list_item"},[t._l(t.prizeListB,function(e,s){return i("div",{key:s,staticClass:"lineb"},[i("div",{staticClass:"image"},[i("img",{attrs:{src:e.img}})]),t._v(" "),i("div",{staticClass:"cont"},[i("h3",{staticClass:"overflowTextOne"},[t._v(t._s(e.title)+" x1")]),t._v(" "),e.status>0?i("p",[t._v("订单状态： "+t._s(1==e.status?"待发货":2==e.status?"已发货":"已完成"))]):i("p"),t._v(" "),i("p",[t._v("中奖时间："+t._s(t._f("formatDate")(e.get_time)))])]),t._v(" "),e.status>0?i("router-link",{staticClass:"btn type_b",attrs:{to:{path:"OrderDetails",query:{app_id:t.app_id,win_prize_id:e.id,active:!0}}}},[t._v("查看订单")]):i("router-link",{staticClass:"btn type_a",attrs:{to:{path:"Order",query:{app_id:t.app_id,win_prize_id:e.id,active:!0}}}},[t._v("立即领取")])],1)}),t._v(" "),i("div",{staticClass:"list_bottom"},[t._v(t._s(t.loadText))])],2):i("div",[t.isMore?i("div",{staticClass:"data_null"},[i("p",[t._v("暂无实物奖品哦")])]):t._e()])])],1)])],1)],1)])},staticRenderFns:[]};var K=i("VU/8")(Q,G,!1,function(t){i("hezW")},"data-v-53354b6e",null);e.default=K.exports},hezW:function(t,e){},n8HW:function(t,e,i){"use strict";function s(t,e){var i=e.to,s=e.url,n=e.replace;if(i&&t){var r=t[n?"replace":"push"](i);r&&r.catch&&r.catch(function(t){if(t&&"NavigationDuplicated"!==t.name)throw t})}else s&&(n?location.replace(s):location.href=s)}e.b=s,e.a=function(t){s(t.parent&&t.parent.$router,t.props)},i.d(e,"c",function(){return n});var n={url:String,replace:Boolean,to:[String,Object]}}});