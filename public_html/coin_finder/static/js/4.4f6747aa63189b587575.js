webpackJsonp([4],{"+HHN":function(t,e){},"3IMD":function(t,e){},JKiR:function(t,e){},LgPH:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("Xxa5"),a=n.n(o),i=n("exGp"),s=n.n(i),c=n("bOdI"),r=n.n(c),l=(n("mMXg"),n("qYlo")),u=(n("eqfM"),n("/QYm")),d=(n("nsZj"),n("02pT"),n("T2s0"),n("1H7Z"),n("hW8u"),n("WpgC"),n("3IMD"),n("JKiR"),n("RfZZ")),p=n("7+uW"),f=n("o69Z"),h=n("V+2B"),m=n("CsZI"),g=n("AA6R"),v=n.n(g),b=n("rhik"),y=n("n8HW"),_=n("+2ln"),w=n("pIDD"),C=Object(f.b)("button"),k=C[0],B=C[1];function O(t,e,n,o){var a,i=e.tag,s=e.icon,c=e.type,r=e.color,l=e.plain,u=e.disabled,d=e.loading,p=e.hairline,f=e.loadingText,m={};r&&(m.color=l?r:h.g,l||(m.background=r),-1!==r.indexOf("gradient")?m.border=0:m.borderColor=r);var g,C,k=[B([c,e.size,{plain:l,loading:d,disabled:u,hairline:p,block:e.block,round:e.round,square:e.square}]),(a={},a[h.c]=p,a)];return t(i,v()([{style:m,class:k,attrs:{type:e.nativeType,disabled:u},on:{click:function(t){d||u||(Object(b.a)(o,"click",t),Object(y.a)(o))},touchstart:function(t){Object(b.a)(o,"touchstart",t)}}},Object(b.b)(o)]),[(C=[],d?C.push(t(w.a,{class:B("loading"),attrs:{size:e.loadingSize,type:e.loadingType,color:"currentColor"}})):s&&C.push(t(_.a,{attrs:{name:s},class:B("icon")})),(g=d?f:n.default?n.default():e.text)&&C.push(t("span",{class:B("text")},[g])),C)])}O.props=Object(d.a)({},y.c,{text:String,icon:String,color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,nativeType:String,loadingText:String,loadingType:String,tag:{type:String,default:"button"},type:{type:String,default:"default"},size:{type:String,default:"normal"},loadingSize:{type:String,default:"20px"}});var x,S=k(O),D=Object(f.b)("dialog"),j=D[0],T=D[1],N=D[2],$=j({mixins:[Object(m.a)()],props:{title:String,width:[Number,String],message:String,className:null,callback:Function,beforeClose:Function,messageAlign:String,cancelButtonText:String,cancelButtonColor:String,confirmButtonText:String,confirmButtonColor:String,showCancelButton:Boolean,transition:{type:String,default:"van-dialog-bounce"},showConfirmButton:{type:Boolean,default:!0},overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!1}},data:function(){return{loading:{confirm:!1,cancel:!1}}},methods:{onClickOverlay:function(){this.handleAction("overlay")},handleAction:function(t){var e=this;this.$emit(t),this.value&&(this.beforeClose?(this.loading[t]=!0,this.beforeClose(t,function(n){!1!==n&&e.loading[t]&&e.onClose(t),e.loading.confirm=!1,e.loading.cancel=!1})):this.onClose(t))},onClose:function(t){this.close(),this.callback&&this.callback(t)},onOpened:function(){this.$emit("opened")},onClosed:function(){this.$emit("closed")},genButtons:function(){var t,e=this,n=this.$createElement,o=this.showCancelButton&&this.showConfirmButton;return n("div",{class:[h.d,T("footer",{buttons:o})]},[this.showCancelButton&&n(S,{attrs:{size:"large",loading:this.loading.cancel,text:this.cancelButtonText||N("cancel")},class:T("cancel"),style:{color:this.cancelButtonColor},on:{click:function(){e.handleAction("cancel")}}}),this.showConfirmButton&&n(S,{attrs:{size:"large",loading:this.loading.confirm,text:this.confirmButtonText||N("confirm")},class:[T("confirm"),(t={},t[h.b]=o,t)],style:{color:this.confirmButtonColor},on:{click:function(){e.handleAction("confirm")}}})])}},render:function(){var t,e=arguments[0];if(this.shouldRender){var n=this.message,o=this.messageAlign,a=this.slots(),i=this.slots("title")||this.title,s=i&&e("div",{class:T("header",{isolated:!n&&!a})},[i]),c=(a||n)&&e("div",{class:T("content")},[a||e("div",{domProps:{innerHTML:n},class:T("message",(t={"has-title":i},t[o]=o,t))})]);return e("transition",{attrs:{name:this.transition},on:{afterEnter:this.onOpened,afterLeave:this.onClosed}},[e("div",{directives:[{name:"show",value:this.value}],attrs:{role:"dialog","aria-labelledby":this.title||n},class:[T(),this.className],style:{width:Object(f.a)(this.width)}},[s,c,this.genButtons()])])}}});function P(t){return f.g?Promise.resolve():new Promise(function(e,n){var o;x&&(o=x.$el,document.body.contains(o))||(x&&x.$destroy(),(x=new(p.a.extend($))({el:document.createElement("div"),propsData:{lazyRender:!1}})).$on("input",function(t){x.value=t})),Object(d.a)(x,P.currentOptions,t,{resolve:e,reject:n})})}P.defaultOptions={value:!0,title:"",width:"",message:"",overlay:!0,className:"",lockScroll:!0,transition:"van-dialog-bounce",beforeClose:null,overlayClass:"",overlayStyle:null,messageAlign:"",getContainer:"body",cancelButtonText:"",cancelButtonColor:null,confirmButtonText:"",confirmButtonColor:null,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!1,closeOnClickOverlay:!1,callback:function(t){x["confirm"===t?"resolve":"reject"](t)}},P.alert=P,P.confirm=function(t){return P(Object(d.a)({showCancelButton:!0},t))},P.close=function(){x&&(x.value=!1)},P.setDefaultOptions=function(t){Object(d.a)(P.currentOptions,t)},P.resetDefaultOptions=function(){P.currentOptions=Object(d.a)({},P.defaultOptions)},P.resetDefaultOptions(),P.install=function(){p.a.use($)},P.Component=$,p.a.prototype.$dialog=P;var M,I=P,A={name:"",data:function(){return{app_id:"",luckyDraw:"",ins:0,isMore:!1,popupShow:!1}},components:(M={},r()(M,I.name,I),r()(M,u.a.name,u.a),r()(M,l.a.name,l.a),M),computed:{},mounted:function(){this.app_id=JSON.parse(localStorage.getItem("userInfo")).id,this.getBuyLuckyDraw()},methods:{getBuyLuckyDraw:function(){var t=this;return s()(a.a.mark(function e(){var n,o,i,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t).bus.$emit("loading",!0),o='{"app_id":"'+n.app_id+'", "buy_type":"2"}',e.next=5,n.ajaxPost("mini_get_buy_lucky_draw_index",o,{});case 5:200==(i=e.sent).code?(s=i.data,n.luckyDraw=s):Object(u.a)(i.msg),n.bus.$emit("loading",!1);case 8:case"end":return e.stop()}},e,t)}))()},payLuckyDraw:function(t){var e=this;return s()(a.a.mark(function n(){var o,i,s;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(o=e).isMore){n.next=3;break}return n.abrupt("return");case 3:return o.isMore=!0,o.bus.$emit("loading",!0),i='{"app_id":"'+o.app_id+'", "virtual_goods_id":"'+t+'"}',n.next=8,o.ajaxPost("mini_pay_lucky_draw_count",i,{});case 8:200==(s=n.sent).code?(o.luckyDraw.money=Number(o.luckyDraw.money)-Number(o.luckyDraw.config[o.ins].real_price),e.popupShow=!0,o.isMore=!1):(Object(u.a)(s.msg),o.isMore=!1),o.bus.$emit("loading",!1);case 11:case"end":return n.stop()}},n,e)}))()},changeNum:function(){var t=this,e=t.luckyDraw.config[t.ins];Number(t.luckyDraw.money)<Number(t.luckyDraw.config[t.ins].real_price)?I.alert({title:"非常抱歉",message:"您的余额不足无法兑换",closeOnPopstate:!0,confirmButtonText:"我知道了",width:"6.8rem",confirmButtonColor:"#ff4e00"}).then(function(){}):I.confirm({title:"购买提醒",message:"您确定给 <em style='color:#ff4e00;'>ID:"+t.app_id+"</em> 的账户<br/>兑换"+e.coin_number+"次抽奖数吗？",confirmButtonText:"确认兑换",cancelButtonText:"取消",width:"7.5rem",confirmButtonColor:"#ffb900",closeOnPopstate:!0}).then(function(){t.payLuckyDraw(e.id)}).catch(function(){})},choiceLi:function(t){this.ins=t},closePopup:function(){this.popupShow=!1}}},H={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("article",{staticClass:"main exchange_box"},[n("div",{staticClass:"change_top"},[n("div",{staticClass:"image"},[n("img",{attrs:{src:t.luckyDraw.avatar}})]),t._v(" "),n("div",{staticClass:"cont"},[n("h3",[t._v(t._s(t.luckyDraw.user_name))]),t._v(" "),n("p",[t._v("ID : "+t._s(t.luckyDraw.app_id))])]),t._v(" "),n("div",{staticClass:"money"},[t._v("账户余额："+t._s(t._f("addZero")(t.luckyDraw.money)))])]),t._v(" "),n("div",{staticClass:"change_cont"},[n("div",{staticClass:"title"},[t._v("请选择兑换次数:")]),t._v(" "),n("ul",t._l(t.luckyDraw.config,function(e,o){return n("li",{key:o,class:{active:o==t.ins},on:{click:function(e){return t.choiceLi(o)}}},[n("div",{staticClass:"num"},[n("h3",[t._v(t._s(e.coin_number)+"次")]),t._v(" "),n("p",[t._v(t._s(parseFloat(e.real_price).toFixed(0))+"余额")])])])}),0),t._v(" "),n("div",{staticClass:"button",on:{click:t.changeNum}},[t._v("立即兑换")])])]),t._v(" "),n("van-popup",{attrs:{"close-on-click-overlay":!1},model:{value:t.popupShow,callback:function(e){t.popupShow=e},expression:"popupShow"}},[n("div",{staticClass:"result_popup"},[n("router-link",{staticClass:"go_index",attrs:{to:{name:"Index"}}}),t._v(" "),n("a",{staticClass:"close_popup",attrs:{href:"javascript:;"},on:{click:t.closePopup}})],1)])],1)},staticRenderFns:[]};var L=n("VU/8")(A,H,!1,function(t){n("+HHN")},"data-v-40729bae",null);e.default=L.exports},n8HW:function(t,e,n){"use strict";function o(t,e){var n=e.to,o=e.url,a=e.replace;if(n&&t){var i=t[a?"replace":"push"](n);i&&i.catch&&i.catch(function(t){if(t&&"NavigationDuplicated"!==t.name)throw t})}else o&&(a?location.replace(o):location.href=o)}e.b=o,e.a=function(t){o(t.parent&&t.parent.$router,t.props)},n.d(e,"c",function(){return a});var a={url:String,replace:Boolean,to:[String,Object]}}});