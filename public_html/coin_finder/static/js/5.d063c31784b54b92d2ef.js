webpackJsonp([5],{"+B/h":function(t,e){},"3vSQ":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=i("mvHQ"),s=i.n(a),r=i("Xxa5"),o=i.n(r),c=i("exGp"),l=i.n(c),u=i("bOdI"),d=i.n(u),p=(i("mMXg"),i("qYlo")),f=(i("eqfM"),i("/QYm")),v=(i("nsZj"),i("T2s0"),i("1H7Z"),i("+B/h"),i("o69Z")),_=i("+2ln"),h=Object(v.b)("notice-bar"),m=h[0],b=h[1],w=m({props:{text:String,mode:String,color:String,leftIcon:String,wrapable:Boolean,background:String,scrollable:{type:Boolean,default:!0},delay:{type:[Number,String],default:1},speed:{type:[Number,String],default:50}},data:function(){return{wrapWidth:0,firstRound:!0,duration:0,offsetWidth:0,showNoticeBar:!0,animationClass:""}},watch:{text:{handler:function(){var t=this;this.$nextTick(function(){var e=t.$refs,i=e.wrap,n=e.content;if(i&&n){var a=i.getBoundingClientRect().width,s=n.getBoundingClientRect().width;t.scrollable&&s>a&&(t.wrapWidth=a,t.offsetWidth=s,t.duration=s/t.speed,t.animationClass=b("play"))}})},immediate:!0}},methods:{onClickIcon:function(t){"closeable"===this.mode&&(this.showNoticeBar=!1,this.$emit("close",t))},onAnimationEnd:function(){var t=this;this.firstRound=!1,this.$nextTick(function(){t.duration=(t.offsetWidth+t.wrapWidth)/t.speed,t.animationClass=b("play--infinite")})}},render:function(){var t,e=this,i=arguments[0],n=this.slots,a=this.mode,s=this.leftIcon,r=this.onClickIcon,o={color:this.color,background:this.background},c={paddingLeft:this.firstRound?0:this.wrapWidth+"px",animationDelay:(this.firstRound?this.delay:0)+"s",animationDuration:this.duration+"s"};return i("div",{attrs:{role:"alert"},directives:[{name:"show",value:this.showNoticeBar}],class:b({wrapable:this.wrapable}),style:o,on:{click:function(t){e.$emit("click",t)}}},[(t=n("left-icon"),t||(s?i(_.a,{class:b("left-icon"),attrs:{name:s}}):void 0)),i("div",{ref:"wrap",class:b("wrap"),attrs:{role:"marquee"}},[i("div",{ref:"content",class:[b("content"),this.animationClass,{"van-ellipsis":!this.scrollable&&!this.wrapable}],style:c,on:{animationend:this.onAnimationEnd,webkitAnimationEnd:this.onAnimationEnd}},[this.slots()||this.text])]),function(){var t,e=n("right-icon");return e||("closeable"===a?t="cross":"link"===a&&(t="arrow"),t?i(_.a,{class:b("right-icon"),attrs:{name:t},on:{click:r}}):void 0)}()])}}),g=i("mF0L"),C={name:"",data:function(){return{userInfo:"",isMore:!1,wheelDeg:0,prizeNumber:8,prizeList:"",turntableCount:"0",winPrizeList:"",popupShow:!1,winPrizeInfo:""}},components:(n={},d()(n,w.name,w),d()(n,f.a.name,f.a),d()(n,p.a.name,p.a),n),computed:{},mounted:function(){this.getUserInfo()},methods:{getUserInfo:function(){var t=this;return l()(o.a.mark(function e(){var i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=t,localStorage.removeItem("userInfo"),g.a.isAndroid()?(i.userInfo=JSON.parse(window.jsbridge.getUserInfo()),i.getTurntableIndex()):g.a.isIos()&&i.$bridge.callhandler("getUserInfo",{},function(t){i.userInfo=JSON.parse(t),i.getTurntableIndex()});case 3:case"end":return e.stop()}},e,t)}))()},getTurntableIndex:function(){var t=this;return l()(o.a.mark(function e(){var i,n,a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(i=t).bus.$emit("loading",!0),localStorage.setItem("userInfo",s()(i.userInfo)),n='{"app_id":"'+i.userInfo.id+'", "turntable_id":"1"}',e.next=6,i.ajaxPost("mini_get_turntable_index",n,{});case 6:200==(a=e.sent).code?(r=a.data,i.prizeList=r.prize_info,i.turntableCount=r.turntable_count,i.winPrizeList=r.roll_win_prize_info):Object(f.a)(a.msg),i.bus.$emit("loading",!1);case 9:case"end":return e.stop()}},e,t)}))()},rotateBtn:function(){var t=this;return l()(o.a.mark(function e(){var i,n,a,s,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=t).isMore){e.next=3;break}return e.abrupt("return");case 3:if(i.isMore=!0,!(i.turntableCount>0)){e.next=14;break}return i.isMore=!0,n=i.wheelDeg,a=i.prizeList,s='{"app_id":"'+i.userInfo.id+'"}',e.next=10,i.ajaxPost("mini_start_turntable_lucky_draw",s,{});case 10:200==(r=e.sent).code?(i.turntableCount=i.turntableCount-1,i.wheelDeg=n-n%360+1080+(360-360/a.length*(r.data.id-1)),setTimeout(function(){t.popupShow=!0,i.winPrizeInfo=r.data,i.isMore=!1},4e3)):(Object(f.a)(r.msg),i.isMore=!1),e.next=17;break;case 14:Object(f.a)("当前抽奖次数为零，快去充值抽奖次数吧"),i.turntableCount=0,i.isMore=!1;case 17:case"end":return e.stop()}},e,t)}))()},closePopup:function(){this.popupShow=!1}}},x={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrap"},[i("article",{staticClass:"main index_box"},[i("div",{staticClass:"info_swipe",style:"animation-duration:"+5*t.winPrizeList.length+"s"},t._l(t.winPrizeList,function(e,n){return i("p",{key:n},[t._v(t._s(e))])}),0),t._v(" "),t._m(0),t._v(" "),i("div",{staticClass:"wheel_wrapper"},[t._m(1),t._v(" "),i("div",{staticClass:"wheel_pointer",on:{click:t.rotateBtn}}),t._v(" "),i("div",{staticClass:"wheel_pointer_off",style:t.isMore?"z-index:10;opacity:1":""}),t._v(" "),i("div",{staticClass:"wheel_bg",style:"transform: rotate("+t.wheelDeg+"deg)"},[i("div",{staticClass:"prize_list"},t._l(t.prizeList,function(e,n){return i("div",{key:n,staticClass:"prize_item_wrapper"},[i("div",{staticClass:"prize_item",style:"transform: rotate("+360/t.prizeList.length*n+"deg)"},[i("div",{staticClass:"prize_name"},[t._v(t._s(e.title))]),t._v(" "),i("div",{staticClass:"prize_icon"},[i("img",{attrs:{src:e.img}})])])])}),0)]),t._v(" "),i("div",{staticClass:"wheel_num"},[t._v("您还有"+t._s(t.turntableCount)+"次抽奖机会")])]),t._v(" "),i("div",{staticClass:"ind_btns"},[i("router-link",{attrs:{to:{path:"Winrecord"}}},[t._v("查看中奖记录")]),t._v(" "),i("router-link",{attrs:{to:{path:"Exchange"}}},[t._v("兑换抽奖次数")])],1),t._v(" "),t._m(2)]),t._v(" "),i("van-popup",{attrs:{"close-on-click-overlay":!1},model:{value:t.popupShow,callback:function(e){t.popupShow=e},expression:"popupShow"}},[i("div",{staticClass:"result_popup"},[i("div",{staticClass:"image"},[i("img",{attrs:{src:t.winPrizeInfo.img}})]),t._v(" "),i("div",{staticClass:"name"},[t._v(t._s(t.winPrizeInfo.name))]),t._v(" "),1!=t.winPrizeInfo.type?i("div",{staticClass:"desc"},[t._v("恭喜您获得"+t._s(t.winPrizeInfo.name)),i("br"),t._v("已计入金币总额")]):i("div",{staticClass:"desc"},[t._v("恭喜您获得"),i("br"),t._v('"'+t._s(t.winPrizeInfo.name)+'"')]),t._v(" "),1!=t.winPrizeInfo.type?i("div",{staticClass:"button",on:{click:t.closePopup}}):i("div",{staticClass:"button2"},[i("router-link",{attrs:{to:{path:"Winrecord"}}},[t._v("立即兑换")]),t._v(" "),i("a",{attrs:{href:"javascript:;"},on:{click:t.closePopup}},[t._v("继续抽奖")])],1)])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ind_banner"},[e("img",{attrs:{src:"https://a119112.oss-cn-beijing.aliyuncs.com/bxl_item/webTurntablePlay/banner.jpg"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"lamp_cont"},[e("img",{attrs:{src:"https://a119112.oss-cn-beijing.aliyuncs.com/bxl_item/webTurntablePlay/wheelLamp1.png"}}),this._v(" "),e("img",{attrs:{src:"https://a119112.oss-cn-beijing.aliyuncs.com/bxl_item/webTurntablePlay/wheelLamp2.png"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ind_rule"},[i("div",{staticClass:"content"},[i("p",[t._v("1.活动名称：幸运大转盘；")]),t._v(" "),i("p",[t._v("2.活动对象：葡萄浏览器全体用户；")]),t._v(" "),i("p",[t._v("3.活动内容：用户可通过余额兑换抽奖机会，同一账号每天可获得一次金币兑换抽奖机会。随机抽奖，金币和余额一旦消耗不支持退回。")]),t._v(" "),i("p",[t._v("4.查看路径：用户可在“中奖记录”中查看奖品，实物奖品兑换成功后3个工作日内发货；")]),t._v(" "),i("p",[t._v("5.其他说明：参与活动过程中，如用户出现作弊等违规行为，我们有权撤销用户参与活动及奖励使用资格。本活动最终解释权归属葡萄浏览器官方。")])])])}]};var k=i("VU/8")(C,x,!1,function(t){i("YWoi")},"data-v-98c14512",null);e.default=k.exports},YWoi:function(t,e){},mvHQ:function(t,e,i){t.exports={default:i("qkKv"),__esModule:!0}},qkKv:function(t,e,i){var n=i("FeBl"),a=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(t){return a.stringify.apply(a,arguments)}}});