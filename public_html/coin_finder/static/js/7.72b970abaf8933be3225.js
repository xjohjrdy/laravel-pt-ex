webpackJsonp([7],{lHjC:function(e,t){},s184:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("Xxa5"),i=s.n(r),a=(s("eqfM"),s("/QYm")),d=s("exGp"),n=s.n(d),o=s("mF0L"),c={name:"",data:function(){return{app_id:"",win_prize_id:"",address:"",good_info:"",address_id:"",isMore:!1}},components:{},mounted:function(){this.app_id=this.$route.query.app_id,this.win_prize_id=this.$route.query.win_prize_id,localStorage.setItem("orderActive",this.$route.query.active),this.getOrderInfo()},methods:{getOrderInfo:function(){var e=this;return n()(i.a.mark(function t(){var s,r,d;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(s=e).bus.$emit("loading",!0),r='{"app_id":"'+s.app_id+'", "win_prize_id":"'+s.win_prize_id+'"}',t.next=5,s.ajaxPost("mini_get_turntable_order_info",r,{});case 5:200==(d=t.sent).code?(s.address=d.data.address,s.good_info=d.data.good_info,localStorage.getItem("query")&&s.getAddressChoice()):Object(a.a)(d.msg),s.bus.$emit("loading",!1);case 8:case"end":return t.stop()}},t,e)}))()},getAddressChoice:function(){var e=this;return n()(i.a.mark(function t(){var s,r,d;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(s=e).bus.$emit("loading",!0),s.address_id=JSON.parse(localStorage.getItem("query")).address_id,s.win_prize_id=JSON.parse(localStorage.getItem("query")).win_prize_id,r='{"app_id":"'+s.app_id+'"}',t.next=7,s.ajaxGet("mini_address/"+s.address_id,r,{});case 7:200==(d=t.sent).code?s.address=d.data:Object(a.a)(d.msg),localStorage.removeItem("query"),s.bus.$emit("loading",!1);case 11:case"end":return t.stop()}},t,e)}))()},submitOrder:function(){var e=this;return n()(i.a.mark(function t(){var s,r,d;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(s=e).isMore){t.next=3;break}return t.abrupt("return");case 3:if(s.address.zone||s.address.detail){t.next=6;break}return Object(a.a)("请选择收货地址"),t.abrupt("return");case 6:return s.isMore=!0,s.bus.$emit("loading",!0),r='{"app_id":"'+s.app_id+'", "order_id":"'+s.good_info.id+'", "receiving_address":"'+o.b.encodeUnicode(s.address.zone+" "+s.address.detail)+'", "address_phone":"'+s.address.phone+'", "address_user":"'+o.b.encodeUnicode(s.address.collection)+'"}',console.log(r),t.next=12,s.ajaxPost("mini_submit_turntable_order",r,{});case 12:200==(d=t.sent).code?(a.a.success("兑换成功"),setTimeout(function(){s.$router.go(-1)},1500),s.isMore=!1):(Object(a.a)(d.msg),s.isMore=!1),s.bus.$emit("loading",!1);case 15:case"end":return t.stop()}},t,e)}))()}}},_={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrap"},[s("article",{staticClass:"main order_box"},[s("div",{staticClass:"ord_head"},[""!=e.address?s("router-link",{staticClass:"address",attrs:{to:{path:"Address",query:{win_prize_id:e.win_prize_id,orderAddressChoice:"true"}}}},[s("div",{staticClass:"h3 overflowTextOne"},[e._v(e._s(e.address.zone)+" "+e._s(e.address.detail))]),e._v(" "),s("div",{staticClass:"h4"},[s("p",{staticClass:"overflowTextOne"},[e._v(e._s(e.address.collection))]),e._v(" "+e._s(e.address.phone))])]):s("router-link",{staticClass:"address",attrs:{to:{path:"Address",query:{win_prize_id:e.win_prize_id,orderAddressChoice:"true"}}}},[s("div",{staticClass:"h3",staticStyle:{"margin-top":".24rem"}},[e._v("请选择收货地址")])]),e._v(" "),e._m(0)],1),e._v(" "),s("div",{staticClass:"ord_content"},[s("div",{staticClass:"goods_info"},[s("div",{staticClass:"image"},[s("img",{attrs:{src:e.good_info.img}})]),e._v(" "),s("div",{staticClass:"cont"},[s("h3",{staticClass:"overflowTextTwo"},[e._v(e._s(e.good_info.title))]),e._v(" "),s("p",[e._v("￥"+e._s(e.good_info.desc))]),e._v(" "),s("h4",[e._v("X"+e._s(e.good_info.luck_draw_get))])])]),e._v(" "),e._m(1)]),e._v(" "),s("div",{staticClass:"price_cont"},[e._v("实付金额：￥0.00")])]),e._v(" "),s("footer",[s("div",{staticClass:"ord_footer"},[e._m(2),e._v(" "),s("div",{staticClass:"btn",on:{click:e.submitOrder}},[e._v("立即兑换")])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tips"},[t("p",[this._v("温馨提示：下单成功后的订单，会在3个工作日内发货，谢谢您的理解与支持")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"line"},[t("span",[this._v("总运费")]),this._v(" "),t("em",[this._v("￥0.00")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"price"},[this._v("￥"),t("em",[this._v("0.00")])])}]};var u=s("VU/8")(c,_,!1,function(e){s("lHjC")},"data-v-fed6e1e8",null);t.default=u.exports}});